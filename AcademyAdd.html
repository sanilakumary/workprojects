
<!DOCTYPE html>
<html>
<head>
    <title>Login Page</title>
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script type="text/javascript">
        var baseUrl = "-----------";
       
        function UpdateAcademy() {
            var url = baseUrl + "/InsertAcademy";
            var GUID = "";
            var id = $('#AcademyId').val();
            if (id != "" && id != undefined && id != null) {
                url = baseUrl + "/UpdateAcademy";
                GUID = id;
            }
            
            //alert($('#Email_Id').val());
            var msg = {
                "GUID": GUID,
                "Name"        : $('#Name').val(),
                "AddressLine1": $('#AddressLine1').val(),
                "AddressLine2": $('#AddressLine2').val(),
                "AddressLine3": $('#AddressLine3').val(),
                "City"        : $('#City').val(),
                "State"       : $('#State').val(),
                "PostalCode"  : $('#PostalCode').val(),
                "TelePhone"   : $('#TelePhone').val(),
                "Email_Id": $('#Email_Id').val(),
                "WebURL"      : $('#WebURL').val(),
                "AccountType" : $('#AccountType').val(),
                "Active"      : $('#Active').val()
                
            };         
            var data = JSON.stringify(msg);
            //alert(data);

            $.ajax({
                type: "POST", //GET or POST or PUT or DELETE verb
                url: url, // Location of the service
                data: data, //Data sent to server
                contentType: "application/json; charset=utf-8", // content type sent to server                
                success: function (result) {
                    //On Successfull service call
                    ServiceSucceeded(result);
                },
                error: function (result) {
                    ServiceFailed(result); // When Service call fails
                }
            });
        }

        function ServiceSucceeded(result) {
          
            alert("Record successfully submitted");
            window.location = "AcademyList.html";

        }

        function ServiceFailed(result) {
            alert('Service call failed: ' +
                  result.status + '' + result.statusText);
        }


        function GetAcademy(id) {
            $.ajax({
                type: "GET", //GET or POST or PUT or DELETE verb
                url: baseUrl + "/GetAcademy/" + id, // Location of the service                
                contentType: "application/json; charset=utf-8", // content type sent to server

                success: function (result) {//On Successfull service call
                  populateFields(result);
                },
                error: function (result) {
                    // show errors
                }
            });
            
        }
        function populateFields(result) {
            $('#Name').val(result.Name);
            $('#AddressLine1').val(result.AddressLine1);
            $('#AddressLine2').val(result.AddressLine2);
            $('#AddressLine3').val(result.AddressLine3);
            $('#City').val(result.City);
            $('#State').val(result.State);
            $('#PostalCode').val(result.PostalCode);
            $('#TelePhone').val(result.TelePhone);
            $('#Email_Id').val(result.Email_Id);
            $('#WebURL').val(result.WebURL);
            $('#AccountType').val(result.AccountType);
            $('#Active').val(result.Active);
           

            //set the hidden field for dealer id
            $('#AcademyId').val(result.GUID);
        }
        //alert("name");
        //alert($('#Name').val());
       
        function processPage() {
            var parameters = location.search.substring(1).split("&");
            var temp = parameters[0].split("=");
            var id = unescape(temp[1]);
            if (id != "" && id != undefined && id != null) {
                GetAcademy(id)
            }
        }
        $(document).ready(
            function () {
                processPage()
            }
        );
    </script>
</head>

<body>
    <form>
        <table>  
            <tr>
                <td colspan="2"><b>Add/Update Acdemy Info</b></td>                
            </tr> 
            <tr>
                <td colspan="2">&nbsp;</td>
            </tr>           
            <tr>
                <td>Name:</td>
                <td><input type="text" id="Name"></td>
            </tr>
            <tr>
                <td>AddressLine1:</td>
                <td><input type="text" id="AddressLine1"></td>
            </tr>
            <tr>
                <td>AddressLine2:</td>
                <td><input type="text" id="AddressLine2"></td>
            </tr>
            <tr>
                <td>AddressLine3:</td>
                <td><input type="text" id="AddressLine3"></td>
            </tr>
            <tr>
                <td>City:</td>
                <td><input type="text" id="City"></td>
            </tr>
            <tr>
                <td>State:</td>
                <td><input type="text" id="State"></td>
            </tr>
            <tr>
                <td>PostalCode:</td>
                <td><input type="text" id="PostalCode"></td>
            </tr>            
            <tr>
                <td>Telephone:</td>
                <td><input type="text"  id="TelePhone"></td>
            </tr>
            <tr>
                <td>Email:</td>
                <td><input type="text" id="Email_Id"></td>
            </tr>
            
            <tr>
                <td>WebURL:</td>
                <td><input type="text" id="WebURL"></td>
            </tr>
            <tr>
                <td>AccountType:</td>
                <td><input type="text" id="AccountType"></td>
            </tr>
            <tr>
                <td>Active:</td>
                <td><input type="text"  id="Active"></td>
            </tr>
            
               
            <tr>
                <td colspan="2">&nbsp;</td>
            </tr>   
            <tr>
               
                <td colspan="2"><input type="submit" value="Submit" onclick="UpdateAcademy()"></td>                
            </tr>
        </table>
        <input type="hidden" id="AcademyId">
    </form>
</body>
</html>
